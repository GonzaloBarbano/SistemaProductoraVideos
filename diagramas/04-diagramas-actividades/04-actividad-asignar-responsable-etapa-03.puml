@startuml
title Diagrama de Actividades - UC3: Asignar Responsable de Etapa

|Coordinador/Productor|
start
:Seleccionar Etapa;
:Seleccionar Usuario para asignar;
:Enviar solicitud de validación (Etapa, Usuario) al Sistema;

|Sistema de Gestión|
:Recibir solicitud (Etapa, Usuario);

repeat
  :Verificar existencia del Usuario;
  if (¿Usuario existe?) then (no)
    :Notificar error al Coordinador/Productor;
    note right
    El usuario no existe. Se informa el error
    y se permite reintentar.
    end note
  else (sí)
    break
  endif
repeat while (Usuario inválido)

:Verificar rol permitido para esa Etapa;
note right
El Sistema valida que el Usuario tenga un rol
compatible con la responsabilidad requerida.
end note

if (¿Rol válido?) then (no)
  :Rechazar asignación;
  :Enviar mensaje de error al Coordinador/Productor;
  stop
else (sí)
  :Registrar asignación (Etapa, Usuario);
  :Actualizar auditoría del proyecto;
endif

|Coordinador/Productor|
:Recibir confirmación de asignación;
stop
@enduml
